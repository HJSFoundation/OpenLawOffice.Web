@model OpenLawOffice.Web.ViewModels.Contacts.TimesheetsViewModel

@{ 
    ViewBag.Title = "Timesheets";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>    
#opt_selected {
    margin-top: 20px;
    font-size: 20px;
}

.print_container {
    margin: 20px 30px 10px 30px ;
    display: inline;
}
 
.print_menu {
    position: absolute;
    width: 240px !important;
    margin-top: 3px !important;
}
 
/* fix for jquery-ui-bootstrap theme */
#print_launcher span {
    display: inline;
}
</style>
            
@using (Html.BeginForm())
    {
@(Html.ValidationSummary(true))

<script>
    $(function () {
        $("#from").datepicker({
            autoSize: true,
            onSelect: function (date) {
                $("form").submit();
            }
        });
        $("#to").datepicker({
            autoSize: true,
            onSelect: function (date) {
                $("form").submit();
            }
        });
        $("#print_drop").jui_dropdown({
            launcher_id: 'print_launcher',
            launcher_container_id: 'print_container',
            menu_id: 'print_menu',
            containerClass: 'print_container',
            menuClass: 'print_menu',
            launcher_is_UI_button: false,
            onSelect: function (event, data) {
                if (data.id == 'print_client') {
                    window.open('/Contacts/Timesheets_PrintClient/@(Model.Contact.Id)?from=' + encodeURIComponent($('#from').val()) + '&to=' + encodeURIComponent($('#to').val()),
                        'PrintWindow', 'width=1024,height=768,scrollbars=yes');
                } else if (data.id == 'print_3rdparty') {
                    window.open('/Contacts/Timesheets_Print3rdParty/@(Model.Contact.Id)?from=' + encodeURIComponent($('#from').val()) + '&to=' + encodeURIComponent($('#to').val()),
                        'PrintWindow', 'width=1024,height=768,scrollbars=yes');
                }
            }
        });
    });
</script>

<div class="options_div" style="height: 22px;">
    <div style="width: 200px; display: inline;">
        @if (ViewBag.From != null)
        {
            <text>        
                From: <input type="text" id="from" name="from" style="width: 75px;" value="@(((DateTime)ViewBag.From).ToString("MM/dd/yyyy"))" />
            </text>
        }
        else
        {
            <text>        
                From: <input type="text" id="from" name="from" style="width: 75px;"/>
            </text>
        }
    </div>
    <div style="width: 200px; display: inline;">
        @if (ViewBag.To != null)
        {
            <text>
                From: <input type="text" id="to" name="to" style="width: 75px;" value="@(((DateTime)ViewBag.To).ToString("MM/dd/yyyy"))" />
            </text>
        }
        else
        {
            <text>
                From: <input type="text" id="to" name="to" style="width: 75px;" />
            </text>
        }
    </div>
    <div style="width: 200px; display: inline; float: right; text-align: right;"> 
        <div id="print_drop" style="text-align: left; display: inline;">
            <div id="print_container" style="display: inline;">
                <button id="print_launcher" style="background-image: url('/Content/fugue-icons-3.5.6/icons-shadowless/printer.png'); 
                    background-position: left center; background-repeat: no-repeat; padding-left: 20px;">Print</button>
            </div>
            <ul id="print_menu">
                <li id="print_client"><a href="javascript:void(0);">Client View</a></li>
                <li id="print_3rdparty"><a href="javascript:void(0);">3rd Party View</a></li>
            </ul>
        </div>
    </div>
</div>

<div style="text-align:center;line-height:20px;">Please select start and stop dates above (or empty them for all dates) and then select print and your desired view from the right.</div>

} 
