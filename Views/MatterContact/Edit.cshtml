@model OpenLawOffice.Web.ViewModels.Matters.MatterContactViewModel

@{ 
    Layout = "~/Views/Shared/_NewLayout.cshtml";
    ViewBag.Title = "Edit Contact Assignment to Matter";
    ViewBag.PageTitle = "Edit Contact Assignment to Matter";
}

@section Breadcrumb {
    <ul class="breadcrumb">
        <li><a href="/Matters">Matters</a></li>
        <li>Matter: <a href="/Matters/Details/@(Model.Matter.Id)">@(Model.Matter.Title)</a></li>
        <li>Contact: <a href="/Contacts/Details/@(Model.Contact.Id)">@(Model.Contact.DisplayName)</a></li>
        <li><a href="/MatterContact/Details/@(Model.Matter.Id)" class="active">Contacts of Matter</a></li>
        <li><a href="/MatterContact/Delete/@(Model.Matter.Id)" class="active">Delete</a></li>
    </ul>
}

<script type="text/javascript">
    $(function () {
        $("#new").click(function () {
            window.location = '/MatterContact/AssignContact/@(Model.Matter.Id)';
        })
        $("#list").click(function () {
            window.location = '/Matters/Contacts/@(Model.Matter.Id)';
        })
        $("#details").click(function () {
            window.location = '/MatterContact/Details/@(Model.Id)';
        })
        $("#edit").click(function () {
            window.location = '/MatterContact/Edit/@(Model.Id)';
        })
        $("#delete").click(function () {
            window.location = '/MatterContact/Delete/@(Model.Id)';
        })
    })
</script>

<div class="container-fluid">
    <div class="row text-right">
        <div class="btn-group">
            <button id="new" class="btn btn-sm btn-primary"><span class="fa fa-plus"></span> New Associations</button>
            <button id="list" class="btn btn-sm btn-primary"><span class="fa fa-list"></span> List</button>
            <button id="details" class="btn btn-sm btn-primary"><span class="fa fa-info"></span> Detail</button>
            <button id="edit" class="btn btn-sm btn-primary"><span class="fa fa-pencil"></span> Edit</button>
            <button id="delete" class="btn btn-sm btn-primary"><span class="fa fa-times"></span> Delete</button>
        </div>
    </div>
</div>
     
<script language="javascript">
    $(document).ready(function () {
        $('#AttorneyFor_DisplayName').change(function () {
            if ($('#AttorneyFor_DisplayName').val() == '')
                $("#AttorneyFor_Id").val(null);
        });
        $('#AttorneyFor_DisplayName').autocomplete({
            source: "/Contacts/ListDisplayNameOnly",
            minLength: 2,
            focus: function (event, ui) {
                $("#AttorneyFor_Id").val(ui.item.Id);
                $("#AttorneyFor_DisplayName").val(ui.item.DisplayName);
                return false;
            },
            select: function (event, ui) {
                $("#AttorneyFor_Id").val(ui.item.Id);
                $("#AttorneyFor_DisplayName").val(ui.item.DisplayName);
                return false;
            }
        }).data("ui-autocomplete")._renderItem = function (ul, item) {
            return $("<li>")
            .append("<a>" + item.DisplayName + "</a>")
            .appendTo(ul);
        };
        $('#SupportStaffFor_DisplayName').change(function () {
            if ($('#SupportStaffFor_DisplayName').val() == '')
                $("#SupportStaffFor_Id").val(null);
        });
        $('#SupportStaffFor_DisplayName').autocomplete({
            source: "/Contacts/ListDisplayNameOnly",
            minLength: 2,
            focus: function (event, ui) {
                $("#SupportStaffFor_Id").val(ui.item.Id);
                $("#SupportStaffFor_DisplayName").val(ui.item.DisplayName);
                return false;
            },
            select: function (event, ui) {
                $("#SupportStaffFor_Id").val(ui.item.Id);
                $("#SupportStaffFor_DisplayName").val(ui.item.DisplayName);
                return false;
            }
        }).data("ui-autocomplete")._renderItem = function (ul, item) {
            return $("<li>")
            .append("<a>" + item.DisplayName + "</a>")
            .appendTo(ul);
        };
        $('#ThirdPartyPayorFor_DisplayName').change(function () {
            if ($('#ThirdPartyPayorFor_DisplayName').val() == '')
                $("#ThirdPartyPayorFor_Id").val(null);
        });
        $('#ThirdPartyPayorFor_DisplayName').autocomplete({
            source: "/Contacts/ListDisplayNameOnly",
            minLength: 2,
            focus: function (event, ui) {
                $("#ThirdPartyPayorFor_Id").val(ui.item.Id);
                $("#ThirdPartyPayorFor_DisplayName").val(ui.item.DisplayName);
                return false;
            },
            select: function (event, ui) {
                $("#ThirdPartyPayorFor_Id").val(ui.item.Id);
                $("#ThirdPartyPayorFor_DisplayName").val(ui.item.DisplayName);
                return false;
            }
        }).data("ui-autocomplete")._renderItem = function (ul, item) {
            return $("<li>")
            .append("<a>" + item.DisplayName + "</a>")
            .appendTo(ul);
        };
    });
</script>
       
@using (Html.BeginForm())
    {
@(Html.ValidationSummary(true))
<table class="detail_table">
    <tr>
        <td colspan="5" class="detail_table_heading">
            Role Information
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Matter
        </td>
        <td class="display-field">
            @(Html.HiddenFor(model => model.Matter.Id))
            @(Html.ActionLink(Model.Matter.Title, "Details", "Matters", new { id = Model.Matter.Id }, null))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            Contact
        </td>
        <td class="display-field">
            @(Html.HiddenFor(model => model.Contact.Id))
            @(Html.ActionLink(Model.Contact.DisplayName, "Details", "Contacts", new { id = Model.Contact.Id }, null))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Contact is <span style="text-decoration: underline;">Client</span>
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsClient))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            Contact is the <span style="text-decoration: underline;">point of contact</span> for Client
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsClientContact))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Contact is <span style="text-decoration: underline;">appointed</span>
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsAppointed))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            Contact is a <span style="text-decoration: underline;">party</span> to the matter
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsParty))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            <span style="text-decoration: underline;">Title</span> for party (e.g., Defendant, Petitioner, etc.)
        </td>
        <td class="display-field">
            @(Html.TextBoxFor(model => model.PartyTitle))
            @(Html.ValidationMessageFor(model => model.PartyTitle))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            Contact is a <span style="text-decoration: underline;">judge</span>
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsJudge))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Contact is a <span style="text-decoration: underline;">witness</span>
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsWitness))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            Contact is an <span style="text-decoration: underline;">attorney</span> for another contact
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsAttorney))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Contact that <span style="text-decoration: underline;">attorney is representing</span>
        </td>
        <td class="display-field">
            @(Html.HiddenFor(model => model.AttorneyFor.Id))
            @(Html.TextBoxFor(model => model.AttorneyFor.DisplayName))
            @(Html.ValidationMessageFor(model => model.AttorneyFor))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            Contact is the <span style="text-decoration: underline;">lead attorney</span>
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsLeadAttorney))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Contact is <span style="text-decoration: underline;">support staff</span> for contact
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsSupportStaff))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            <span style="text-decoration: underline;">Support staff</span> for contact
        </td>
        <td class="display-field">
            @(Html.HiddenFor(model => model.SupportStaffFor.Id))
            @(Html.TextBoxFor(model => model.SupportStaffFor.DisplayName))
            @(Html.ValidationMessageFor(model => model.SupportStaffFor))
        </td>
    </tr>
    <tr>
        <td class="display-label">
            Contact is a <span style="text-decoration: underline;">third party payor</span>
        </td>
        <td class="display-field">
            @(Html.CheckBoxFor(model => model.IsThirdPartyPayor))
        </td>
    </tr>
    <tr class="tr_alternate">
        <td class="display-label">
            <span style="text-decoration: underline;">Third party payor</span> for contact
        </td>
        <td class="display-field">
            @(Html.HiddenFor(model => model.ThirdPartyPayorFor.Id))
            @(Html.TextBoxFor(model => model.ThirdPartyPayorFor.DisplayName))
            @(Html.ValidationMessageFor(model => model.ThirdPartyPayorFor))
        </td>
    </tr>
</table>
<p>
    <input type="submit" value="Save" />
</p>
}
<div id="pageInfoDialog" title="Help">
    <p>
    <span style="font-weight: bold; text-decoration: underline;">Info:</span>
    Modify the information on this page to make changes to the assignmnet of a contact to a matter.  Required fields are indicated with an
    <span style="color: #ee0000;font-size: 12px;cursor:help;" title="Required Field">*</span>.<br /><br />
    <span style="font-weight: bold; text-decoration: underline;">Usage:</span>
    Fields marked with an <span style="color: #ee0000;font-size: 12px;cursor:help;" title="Required Field">*</span> are required.
    </p>
</div>